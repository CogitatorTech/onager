# group: [onager]

require onager

# Test suite for Onager approximation algorithms

statement ok
pragma enable_verification

# Create test edge data - simple triangle with one extra edge (1-4)
statement ok
create table test_edges as select * from (values
  (1::bigint, 2::bigint), (2, 3), (3, 1),
  (1, 4)
) t(src, dst)

# Test Maximum Clique Approximation
# Should return 1, 2, 3 as they form a triangle (clique of size 3)
query I
select * from onager_apx_max_clique((select src, dst from test_edges)) order by node_id
----
1
2
3

# Test Independent Set Approximation
query I
select count(*) > 0 from onager_apx_independent_set((select src, dst from test_edges))
----
1

# Test Vertex Cover Approximation
query I
select count(*) > 0 from onager_apx_vertex_cover((select src, dst from test_edges))
----
1

# Cleanup
statement ok
drop table test_edges

# TSP Test - requires weighted edges
statement ok
create table weighted_edges as select * from (values
  (1::bigint, 2::bigint, 1.0::double), (2, 3, 1.0), (3, 4, 1.0), (4, 1, 1.0)
) t(src, dst, weight)

# Test TSP Approximation
query I
select count(*) > 0 from onager_apx_tsp((select src, dst, weight from weighted_edges))
----
1

statement ok
drop table weighted_edges
